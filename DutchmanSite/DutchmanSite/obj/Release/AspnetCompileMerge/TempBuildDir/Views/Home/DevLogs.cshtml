
@{
    ViewBag.Title = "DevLogs";
    Layout = "~/Views/Shared/_Layout.cshtml";
    DutchmanSite.Models.DevLogsModel Logs = new DutchmanSite.Models.DevLogsModel();
    string SortOption = Path.GetFileName(Request.Url.ToString());
}

<!--**********HOW TO UPDATE*********************
    *Add site to multiple choice dropdown on this site
    *Add site to sort order dropdown on this site
    *Add site to Go To dropdown on this site
    *Log Edit of the dev log model needs the new site listed as well. 
    *Add to sort order on Log Edit List, for the dev log model
    -->

<!--**********Spaces to get site under the nav bar*********************-->
<br />
<br />
<br />
<!--************************New Log Button*****************************-->
<div class="LogFloat">
    <center>
        <div class="btn-group">
            <button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#addModal">Create New Log</button>
        </div>
        <div class="btn-group">
            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#imgUploadModal">Upload Images</button>
        </div>
        <div class="btn-group">
            <div class="dropdown">
                <button class="btn btn-lg dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Sort Order
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="~/Home/DevLogs/OldToNew">Oldest</a><br />
                    <a class="dropdown-item" href="~/Home/DevLogs/NewToOld">Newest</a><br />
                    <a class="dropdown-item" href="~/Home/DevLogs/HomeOldToNew">Home Page Oldest</a><br />
                    <a class="dropdown-item" href="~/Home/DevLogs/HomeNewToOld">Home Page Newest</a><br />
                    <!--Add New Site Here-->
                    <a class="dropdown-item" href="~/Home/DevLogs/WoSOldToNew">Stromgard Oldest</a><br />
                    <a class="dropdown-item" href="~/Home/DevLogs/WosNewToOld">Stromgard Newest</a><br />
                    <a class="dropdown-item" href="~/Home/DevLogs/NBOldToNew">Nice Bolwing Oldest</a><br />
                    <a class="dropdown-item" href="~/Home/DevLogs/NBNewToOld">Nice Bowling Newest</a><br />
                </div>
            </div>
        </div>
        <div class="btn-group">
            <div class="dropdown">
                <button class="btn btn-primary btn-lg dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Go To Site
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="~/Home/Index">Home Page</a><br />
                    <!--Add New Site Here-->
                    <a class="dropdown-item" href="~/Home/WyrdOfStromgard">Stromgard</a><br />
                    <a class="dropdown-item" href="~/Home/NiceBowling">Nice Bowling</a><br />
                </div>
            </div>
        </div>
    </center>
</div>

<!--************************List Questions*****************************-->
<ul class="EditLogs" style="list-style-type:none">
    @Html.Raw(Logs.LogEditList(SortOption))
</ul>

<!--***********************Add Question Modal**************************-->
<div class="modal custom fade" id="addModal" role="dialog">
    <div class="modal-dialog">
        <!--Spaces to get site under the nav bar-->
        <br />
        <br />
        <br />
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" id="editbtn" class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title">Create New Log</h2>
            </div>
            <div class="modal-body">
                <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
                    <fieldset>

                        <!-- Value needs to be the view name. -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="site">Select Site</label>
                            <div class="col-md-4">
                                <select id="site" name="site" class="form-control">
                                    <option value="Index">Home Page</option>
                                    <!--Add New Site Here-->
                                    <option value="WyrdOfStromgard">WyrdOfStromgard</option>
                                    <option value="NiceBowling">Nice Bowling</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="icon">Glyph Icon</label>
                            <div class="col-md-4">
                                <input id="icon" name="icon" type="text" placeholder="" class="form-control input-md">
                                <span class="help-block">ex. fas fa-flask fa-7x</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="iconText">Icon Subtitle</label>
                            <div class="col-md-4">
                                <input id="iconText" name="iconText" type="text" placeholder="" class="form-control input-md">

                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="title">Title</label>
                            <div class="col-md-4">
                                <input id="title" name="title" type="text" placeholder="" class="form-control input-md">
                                <span class="help-block">Title of summery card</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="summery">Summery</label>
                            <div class="col-md-4">
                                <input id="summery" name="summery" type="text" placeholder="" class="form-control input-md">

                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="description">Modal Content</label>
                            <div class="col-md-4">
                                <textarea class="form-control" id="description" name="description">HTML OK in this feild</textarea>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="isPublished"></label>
                            <div class="col-md-4">
                                <div class="radio">
                                    <label for="isPublished-0">
                                        <input type="radio" name="isPublished" id="isPublished-0" value="0" checked="checked">
                                        Draft
                                    </label>
                                </div>
                                <div class="radio">
                                    <label for="isPublished-1">
                                        <input type="radio" name="isPublished" id="isPublished-1" value="1">
                                        Published
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-4 control-label" for="save"></label>
                            <div class="col-md-8">
                                <button type="submit" class="btn btn-info">Save</button>
                                <button data-dismiss="modal" class="btn btn-danger">Exit</button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>  <!--Modal Body-->

        </div> <!--Modal Content-->
    </div> <!--Modal Dialog-->
</div>

<!--***********************Upload Image Modal**************************-->
<div class="modal custom fade" id="imgUploadModal" role="dialog">
    <div class="modal-dialog">
        <!--Spaces to get site under the nav bar-->
        <br />
        <br />
        <br />
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" id="editbtn" class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title">Upload Image!</h2>
            </div>
            <div class="modal-body">
            <p>You will need to use the full path when refrencing the images in the log.<br /><br />
                http://www.LostDutchmanSoftware.com/Content/img/
                <br /><br />
                Image can not be larger than 15MB, must be type PNG, JPG, BMP, GIF, or TIF<br /><br />
                <i>*If you upload an image with a name that has already been used it will have an incrementing integer appended to the image name.</i></p>
                <!-- File Button -->
                <div class="form-group col-md-12">
                    <label class="col-md-4 control-label" for="filebutton">Upload Image:</label>
                    <div class="col-sm-pull-8">
                        <input id="filebutton" name="formFile" class="input-file" type="file" style="vertical-align:top;">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label" for="save"></label>
                    <div class="col-md-8">
                        <input type="button" class="btn btn-info" value="Upload" onclick="Upload();" />
                        <button data-dismiss="modal" class="btn btn-danger">Exit</button>
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
            </div>  <!--Modal Body-->

        </div> <!--Modal Content-->
    </div> <!--Modal Dialog-->
</div>
@section scripts{
<script javascript>
    function Upload() {
        var formData = new FormData();
        formData.append("file", document.getElementById("filebutton").files[0]);
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/Home/UploadImage", true);
        xhr.addEventListener("load", function (evt) { UploadComplete(evt, xhr.responseText); }, false);
        xhr.addEventListener("error", function (evt) { UploadFailed(evt, xhr.responseText); }, false);
        xhr.send(formData);
    }

    function UploadComplete(evt, name) {
        alert(name);

    }

    function UploadFailed(evt, response) {
        alert(response);

    }
</script>
}